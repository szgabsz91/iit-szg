language: node_js
os: linux

node_js:
  - "14"

addons:
  chrome: stable

cache:
  directories:
    - ./node_modules

before_install:
  - npm install -g yarn
  - npm install -g firebase-tools

install:
  - rm -rf dist node_modules
  - yarn

script:
  - yarn lint
  - yarn test
  - yarn e2e
  - yarn build --base-href https://iit-szg.web.app/

deploy:
  provider: firebase
  skip_cleanup: true
  token: $FIREBASE_TOKEN
